<!doctype html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <title>piured-engine API  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet'>
  <link href='assets/style.css' rel='stylesheet'>
  <link href='assets/github.css' rel='stylesheet'>
  <link href='assets/split.css' rel='stylesheet'>
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>piured-engine API</h3>
          <div class='mb1'><code></code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            spellcheck='false'
            autocapitalize='off'
            autocorrect='off'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#piured-engine'
                  class="h5 bold black caps">
                  piured-engine
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#engine'
                  class=" toggle-sibling">
                  Engine
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  
                    <ul class='list-reset py1-ul pl1'>
                      <li class='h5'><span>Instance members</span></li>
                      
                      <li><a
                        href='#engineconfigurestage'
                        class='regular pre-open'>
                        #configureStage
                      </a></li>
                      
                      <li><a
                        href='#engineaddplayer'
                        class='regular pre-open'>
                        #addPlayer
                      </a></li>
                      
                      <li><a
                        href='#engineaddtodom'
                        class='regular pre-open'>
                        #addToDOM
                      </a></li>
                      
                      <li><a
                        href='#engineupdateoffset'
                        class='regular pre-open'>
                        #updateOffset
                      </a></li>
                      
                      <li><a
                        href='#enginetuneplaybackspeed'
                        class='regular pre-open'>
                        #tunePlayBackSpeed
                      </a></li>
                      
                      <li><a
                        href='#enginekeydown'
                        class='regular pre-open'>
                        #keyDown
                      </a></li>
                      
                      <li><a
                        href='#enginekeyup'
                        class='regular pre-open'>
                        #keyUp
                      </a></li>
                      
                      <li><a
                        href='#enginetouchdown'
                        class='regular pre-open'>
                        #touchDown
                      </a></li>
                      
                      <li><a
                        href='#enginetouchup'
                        class='regular pre-open'>
                        #touchUp
                      </a></li>
                      
                      <li><a
                        href='#enginesetcameraposition'
                        class='regular pre-open'>
                        #setCameraPosition
                      </a></li>
                      
                      <li><a
                        href='#enginequerystagetype'
                        class='regular pre-open'>
                        #queryStageType
                      </a></li>
                      
                      <li><a
                        href='#enginestart'
                        class='regular pre-open'>
                        #start
                      </a></li>
                      
                      <li><a
                        href='#enginestartplayback'
                        class='regular pre-open'>
                        #startPlayBack
                      </a></li>
                      
                      <li><a
                        href='#enginestop'
                        class='regular pre-open'>
                        #stop
                      </a></li>
                      
                      <li><a
                        href='#engineonwindowresize'
                        class='regular pre-open'>
                        #onWindowResize
                      </a></li>
                      
                      <li><a
                        href='#enginelogframe'
                        class='regular pre-open'>
                        #logFrame
                      </a></li>
                      
                      <li><a
                        href='#engineonframelog'
                        class='regular pre-open'>
                        #onFrameLog
                      </a></li>
                      
                      <li><a
                        href='#engineonstagecleared'
                        class='regular pre-open'>
                        #onStageCleared
                      </a></li>
                      
                    </ul>
                  
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#configuration-files'
                  class="h5 bold black caps">
                  Configuration Files
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#stageconfig'
                  class="">
                  StageConfig
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#playerconfig'
                  class="">
                  PlayerConfig
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#keyinputconfig'
                  class="">
                  KeyInputConfig
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#touchinputconfig'
                  class="">
                  TouchInputConfig
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#remoteinput'
                  class="">
                  RemoteInput
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='piured-engine' class='mt0'>
    piured-engine
  </h2>

  
    
  
</section></div>
          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='engine'>
      Engine
    </h3>
    
    
  </div>
  

  <p>PIURED is a Pump It Up stage simulator that works directly in your browser.
There are already a number of dance simulators for Windows and Linux, most of them being StepMania-based.
Stepmania is a great choice for DDR-style rhythm games, however it lacks to capture the behaviour as well as
the feel &#x26; look of a Pump It Up arcade.</p>
<p>In this sense, PIURED's goal is to recreate as accurately as possible the Pump It Up-style experience
whilst keeping the engine cross-platform (web-based), so it can be enjoyed anywhere and anytime.</p>
<p>PIURED is written in its whole in Javascript using <a href="https://threejs.org/">ThreeJS</a>. The code is organized
trying to mimick the structure of any game engine. The source code can be found in <a href="https://github.com/piulin/piured-engine">this repo</a> under the folder <code>js</code>.</p>
<p>This engine features:</p>
<ol>
<li>A Stepmania SSC parser. Stepcharts can be directly read from bare Stepmania files. No need to convert them into another intermediate format. This means that all the songs that are available for Pump-style would work off-the-shelf in PIURED.</li>
<li>A loader that supports both MP3 and OGG audio formats. These are the most common formats used in Stepmania audio files.</li>
<li>Support for changes of BPM, SCROLL, STOPS, DELAYS as well as changes of SPEED (attributes used in Stepmania to create effects).</li>
<li>Pump-single, Pump-double and Pump-Halfdouble styles.</li>
<li>VS. mode, including two or more players playing any combination of Pump-single and Pump-double styles.</li>
<li>Remote input capabilities to create online-like battles.</li>
<li>On-the-fly tuning of the offset parameter.</li>
<li>Variable speed rates.</li>
<li>A number of Noteskins to choose from (sprite-based).</li>
<li>Game performance metrics.</li>
<li>Visual effects close to the original arcade.</li>
<li>A background theme which "FEELS THE BEAT".</li>
</ol>
<p>There are, however, some features available in Stepmania that PIURED does not support:</p>
<ol>
<li>The engine only supports a 4/4 bar.</li>
<li>BGA in any video format is not supported.</li>
<li>Dance pads or Joysticks are not supported as input methods.</li>
<li>Performance metrics may not be deterministic.</li>
<li>Only Pump-single, Pump-double and Pump-halfdouble styles are supported. Any other style may cause</li>
</ol>
<p>the engine to crash.</p>
<p>The <a href="#engine">Engine</a> class is the main abstraction for creating a pump it up stage and playing a chart. It contains all
methods necessary to create a new stage, add an indefinite number of local and remote players, load Stepmania SSC files,
and report players' performance.</p>
<p>This class is intended to be used only as javascript code on the client-side, as it will attempt to draw stuff on the browser.</p>
<p>The constructor returns an initialized <a href="#engine">Engine</a> object. It essentially sets up the renderer and places the camera into position.</p>

    <div class='pre p1 fill-light mt0'>new Engine(): <a href="#engine">Engine</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="#engine">Engine</a></code>:
        for the class 
<a href="#engine">Engine</a>
 to work properly, the returned object must be stored as a global variable 
<code>engine</code>
 on the client side.
Make sure that there is just one engine instance running across the client side.

      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Creating a new engine. Make sure that the variable <code>engine</code> is globally accessible.</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> engine = <span class="hljs-keyword">new</span> Engine() ;</pre>
    
      <p><p>Full example to configure a working engine.</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stageCleared</span>(<span class="hljs-params">performance</span>) </span>{

  <span class="hljs-built_in">console</span>.log(performance) ;
  <span class="hljs-built_in">document</span>.removeEventListener( <span class="hljs-string">&#x27;touchstart&#x27;</span>, onTouchDown, <span class="hljs-literal">false</span> );
  <span class="hljs-built_in">document</span>.removeEventListener( <span class="hljs-string">&#x27;touchend&#x27;</span>, onTouchUp, <span class="hljs-literal">false</span> );
  engine = <span class="hljs-literal">null</span> ;
  <span class="hljs-built_in">window</span>.close() ;


}

<span class="hljs-keyword">let</span> engine = <span class="hljs-keyword">new</span> Engine() ;

<span class="hljs-keyword">let</span> speed = config.speed ;
<span class="hljs-keyword">let</span> playback = <span class="hljs-number">1.0</span> ;
<span class="hljs-keyword">let</span> offset = <span class="hljs-number">0.0</span> ;
<span class="hljs-keyword">let</span> noteskin = <span class="hljs-string">&#x27;NX&#x27;</span> ;
<span class="hljs-keyword">let</span> resourcePath = <span class="hljs-string">&#x27;piured-engine&#x27;</span> ;
<span class="hljs-keyword">let</span> leftKeyMap = {
   <span class="hljs-attr">dl</span>: <span class="hljs-string">&#x27;Z&#x27;</span>,
   <span class="hljs-attr">ul</span> : <span class="hljs-string">&#x27;Q&#x27;</span>,
   <span class="hljs-attr">c</span> : <span class="hljs-string">&#x27;S&#x27;</span>,
   <span class="hljs-attr">ur</span> : <span class="hljs-string">&#x27;E&#x27;</span>,
   <span class="hljs-attr">dr</span>: <span class="hljs-string">&#x27;C&#x27;</span>
}
<span class="hljs-keyword">let</span> rightKeyMap = {
   <span class="hljs-attr">dl</span>: <span class="hljs-string">&#x27;V&#x27;</span>,
   <span class="hljs-attr">ul</span> : <span class="hljs-string">&#x27;R&#x27;</span>,
   <span class="hljs-attr">c</span> : <span class="hljs-string">&#x27;G&#x27;</span>,
   <span class="hljs-attr">ur</span> : <span class="hljs-string">&#x27;Y&#x27;</span>,
   <span class="hljs-attr">dr</span>: <span class="hljs-string">&#x27;N&#x27;</span>
}
<span class="hljs-keyword">let</span> chartLevel = <span class="hljs-number">0</span> ;


<span class="hljs-keyword">let</span> stageConfig = <span class="hljs-keyword">new</span> StageConfig(<span class="hljs-string">&#x27;song.ssc&#x27;</span>,
         <span class="hljs-string">&#x27;song.mp3&#x27;</span>,
         playback,
         offset,
         resourcePath,
         [noteskin],
         <span class="hljs-function">() =&gt;</span> {
             <span class="hljs-keyword">let</span> dateToStart = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() ;
             <span class="hljs-comment">// delay of 2 secs</span>
             dateToStart.setMilliseconds(dateToStart.getMilliseconds() + <span class="hljs-number">2000.0</span>) ;
             engine.startPlayBack(dateToStart, <span class="hljs-function">() =&gt;</span> {<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() ;}) ;
         }
) ;

engine.configureStage(stageConfig) ;

<span class="hljs-keyword">let</span> p1InputConfig ;
<span class="hljs-keyword">let</span> accuracyMargin = <span class="hljs-number">0.15</span> ;

accuracyMargin = <span class="hljs-number">0.25</span> ;

<span class="hljs-built_in">window</span>.onkeydown = engine.onKeyDown ;
<span class="hljs-built_in">window</span>.onkeyup = engine.onKeyUp ;

p1InputConfig = <span class="hljs-keyword">new</span> KeyInputConfig(leftKeyMap, rightKeyMap) ;

<span class="hljs-keyword">let</span> p1Config = <span class="hljs-keyword">new</span> PlayerConfig(p1InputConfig,
                     noteskin,
                     chartLevel,
                     speed,
                     accuracyMargin) ;


engine.addPlayer(p1Config) ;

engine.addToDOM(<span class="hljs-string">&#x27;container&#x27;</span>);

<span class="hljs-built_in">window</span>.addEventListener( <span class="hljs-string">&#x27;resize&#x27;</span>, engine.onWindowResize.bind(engine), <span class="hljs-literal">false</span> );

engine.onStageCleared = stageCleared ;

engine.start();</pre>
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Instance Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='engineconfigurestage'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>configureStage(stageConfig)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Constructs the stage where one or more players will dance. In a nutshell, the stage sets up the environment needed
to play a specific tune associated with its Stepmania step definition file (i.e., mp3+SSC).
This method must be called before adding new players to the stage through <a href="#engineaddplayer">Engine#addPlayer</a>.</p>

    <div class='pre p1 fill-light mt0'>configureStage(stageConfig: <a href="#stageconfig">StageConfig</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>stageConfig</span> <code class='quiet'>(<a href="#stageconfig">StageConfig</a>)</code>
	    stage configuration

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Configuring a new stage. Details of the <a href="#stageconfig">StageConfig</a> object are omitted.</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> stageConfig = <span class="hljs-keyword">new</span> StageConfig( ... ) ;
engine.configureStage(stageConfig) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineaddplayer'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addPlayer(playerConfig)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Adds a new player to the dance stage. This method must be called after configuring the stage through <a href="#engineconfigurestage">Engine#configureStage</a>.
There is no upper limit for the number of players that can join, but for some number the camera position must be updated to show the whole stage.
Players could play locally by using traditional input methods (e.g., Keyboard, Touch) or remotely (via logging <a href="FrameLog">FrameLog</a>s).</p>

    <div class='pre p1 fill-light mt0'>addPlayer(playerConfig: <a href="#playerconfig">PlayerConfig</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>playerConfig</span> <code class='quiet'>(<a href="#playerconfig">PlayerConfig</a>)</code>
	    player configuration

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a></code>:
        player identifier

      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Adding a new player to the stage. Details of the <a href="#playerconfig">PlayerConfig</a> object are omitted.</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> p1Config = <span class="hljs-keyword">new</span> PlayerConfig( ... ) ;
<span class="hljs-keyword">let</span> p1Id = engine.addPlayer(p1Config) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineaddtodom'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>addToDOM(containerId)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Appends the renderer's DOM element to a container with id <code>containerId</code> present in your HTML document.
You need to call this function so that the engine has a canvas to draw on.</p>

    <div class='pre p1 fill-light mt0'>addToDOM(containerId: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>containerId</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a>)</code>
	    container id in the HTML document

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Granted we have defined in a HTML document the following container <code>&#x3C;div id="container">&#x3C;/div></code>, we add the engine to the DOM</p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.addToDOM(<span class="hljs-string">&#x27;container&#x27;</span>) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineupdateoffset'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>updateOffset(playerId, newOffsetOffset)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Updates the player's stage <code>playerId</code> offset. This function can be used to sync off-beat steps on-the-fly when the
engine is running.</p>

    <div class='pre p1 fill-light mt0'>updateOffset(playerId: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, newOffsetOffset: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>playerId</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    player identifier

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>newOffsetOffset</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    new offset to be applied in seconds. 
<code>newOffsetOffset</code>
 must be a floating point number

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Updating the offset by 0.01 seconds for player with id <code>p1Id := 0</code>.</p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.updateOffset(p1Id, <span class="hljs-number">0.01</span>) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginetuneplaybackspeed'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>tunePlayBackSpeed(playBackSpeed)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Updates the stage's audio playback rate (i.e., increases or decreases the audio &#x26; step speed). This function might be called
while the engine is running. This function won't have any effect if there are remote players logged in the engine.</p>

    <div class='pre p1 fill-light mt0'>tunePlayBackSpeed(playBackSpeed: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>playBackSpeed</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    new playback speed to be applied in percentage. 
<code>playBackSpeed</code>
 must be a floating point

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Speeding up the playback rate to 110% (1.1x)</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// changes the playback speed to 110%</span>
engine.tunePlayBackSpeed(<span class="hljs-number">1.1</span>) ;

<span class="hljs-comment">// Essentially stops the playback</span>
engine.tunePlayBackSpeed(<span class="hljs-number">0.0</span>) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginekeydown'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>keyDown(event)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Logs a key down event from the browser into the engine. Keyboard events must be logged if any player is using <a href="#keyinputconfig">KeyInputConfig</a>
(i.e. keyboard) as input method.</p>

    <div class='pre p1 fill-light mt0'>keyDown(event: <a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent">KeyboardEvent</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>event</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent">KeyboardEvent</a>)</code>
	    keyboard event

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Configuring the browser to log the key strokes into the engine</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">window</span>.onkeydown = engine.keyDown ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginekeyup'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>keyUp(event)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Logs a key up event from the browser into the engine. Keyboard events must be logged if any player is using <a href="#keyinputconfig">KeyInputConfig</a>
(i.e. keyboard) as input method.</p>

    <div class='pre p1 fill-light mt0'>keyUp(event: <a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent">KeyboardEvent</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>event</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent">KeyboardEvent</a>)</code>
	    keyboard event

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Configuring the browser to log the key strokes into the engine</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">window</span>.onkeyup = engine.keyUp ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginetouchdown'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>touchDown(event)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Logs a touch down event from the browser into the engine. Touch events must be logged if any player is using <a href="#touchinputconfig">TouchInputConfig</a>
(i.e. Touch capable device) as input method.</p>

    <div class='pre p1 fill-light mt0'>touchDown(event: <a href="https://developer.mozilla.org/docs/Web/API/TouchEvent">TouchEvent</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>event</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/API/TouchEvent">TouchEvent</a>)</code>
	    touch event

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Configuring the browser to log touch down events into the engine</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">document</span>.addEventListener( <span class="hljs-string">&#x27;touchstart&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-comment">// disable default actions</span>
    event.preventDefault();
    event.stopPropagation();

    engine.touchDown(event) ;
}, <span class="hljs-literal">false</span> );</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginetouchup'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>touchUp(event)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Logs a touch up event from the browser into the engine. Touch events must be logged if any player is using <a href="#touchinputconfig">TouchInputConfig</a>
(i.e. Touch capable device) as input method.</p>

    <div class='pre p1 fill-light mt0'>touchUp(event: <a href="https://developer.mozilla.org/docs/Web/API/TouchEvent">TouchEvent</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>event</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/API/TouchEvent">TouchEvent</a>)</code>
	    touch event

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Configuring the browser to log touch down events into the engine</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">document</span>.addEventListener( <span class="hljs-string">&#x27;touchend&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-comment">// disable default actions</span>
    event.preventDefault();
    event.stopPropagation();

    engine.touchUp(event) ;
}, <span class="hljs-literal">false</span> );</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginesetcameraposition'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>setCameraPosition(X, Y, Z)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Repositions the camera. Use this method to configure how the stage is displayed.</p>

    <div class='pre p1 fill-light mt0'>setCameraPosition(X: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, Y: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, Z: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>X</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    x position in the euclidean space

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>Y</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    y position in the euclidean space

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>Z</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    z position in the euclidean space

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Moving the camera backwards to fully show players' stages when both are playing <code>pump-double</code> styles</p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.setCameraPosition(<span class="hljs-number">0</span>,-<span class="hljs-number">3.4</span>,<span class="hljs-number">12</span>) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginequerystagetype'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>queryStageType(level)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Query the style of a specific level from the configured stage.</p>

    <div class='pre p1 fill-light mt0'>queryStageType(level: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>level</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    level identifier in the range [0-&#x3C;no_levels-1>]

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">String</a></code>:
        level style defined in the SSC file. Common values are 
<code>pump-single</code>
, 
<code>pump-double</code>
, and 
<code>pump-halfdobule</code>

      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Query if one player is playing <code>pump-double</code> to reposition the camera</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> p1StageType = engine.queryStageType(P1chartLevel) ;
<span class="hljs-keyword">if</span> (p1StageType === <span class="hljs-string">&#x27;pump-double&#x27;</span>) {
    engine.setCameraPosition(<span class="hljs-number">0</span>,-<span class="hljs-number">3.4</span>,<span class="hljs-number">12</span>) ;
}</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginestart'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>start()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets the engine into a valid state and prepares it to start the song playback. Call this function once the stage
and all players have been configured. This method will trigger the function <a href="StageConfig#onReadyToStart">StageConfig#onReadyToStart</a> once
the initialization is completed.</p>

    <div class='pre p1 fill-light mt0'>start(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Starting the engine</p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.start() ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginestartplayback'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>startPlayBack(dateToStart, getDateFn = ()=>{return new Date();})</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Schedules when the engine should start playing the song and starts the rendering main loop.
You may only call this function once <a href="StageConfig#onReadyToStart">StageConfig#onReadyToStart</a> callback
is called.</p>

    <div class='pre p1 fill-light mt0'>startPlayBack(dateToStart: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>, getDateFn: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>dateToStart</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Date">Date</a>)</code>
	    date to start playing

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>getDateFn</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>?
            = <code>()=&gt;{return new Date();}</code>)</code>
	    function getting the current date

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>We let the engine start playing back after 2 seconds once the engine has loaded up</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> onReadyToStart = <span class="hljs-function">() =&gt;</span> {
     <span class="hljs-keyword">let</span> dateToStart = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() ;
     <span class="hljs-comment">// delay of 2 secs</span>
     dateToStart.setMilliseconds(dateToStart.getMilliseconds() + <span class="hljs-number">2000.0</span>) ;
     engine.startPlayBack(dateToStart, <span class="hljs-function">() =&gt;</span> { <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>() ; }
}</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginestop'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>stop()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Stops the engine and cleans up the renderer. This action is not reversible. After calling this method, the object
must not be used again. This method is called automatically once the song has reached its end.</p>

    <div class='pre p1 fill-light mt0'>stop(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineonwindowresize'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>onWindowResize()</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Update size of drawable canvas.</p>

    <div class='pre p1 fill-light mt0'>onWindowResize(): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>Call it when the browser detects that the window has been resized</p>
</p>
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-built_in">window</span>.addEventListener( <span class="hljs-string">&#x27;resize&#x27;</span>, engine.onWindowResize.bind(engine), <span class="hljs-literal">false</span> );</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='enginelogframe'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>logFrame(frameLog)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>It logs frameLogs into the engine. FrameLogs are JSON messages that are passed between engines when remote
players are configured. They enable the engine to know what is the current status of a remote player.</p>

    <div class='pre p1 fill-light mt0'>logFrame(frameLog: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>frameLog</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/JSON">JSON</a>)</code>
	    frame to be logged

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>To learn more about how to use frame logs for communicating a pair of engines, have a look at
the repo at <a href="https://github.com/piulin/piured">https://github.com/piulin/piured</a></p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.logFrame(<span class="hljs-built_in">JSON</span>) ;</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineonframelog'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>onFrameLog</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets the callback function <code>onFrameLog</code>. This function is called once the engine has a frame to be logged from any
local player. Ideally, the content of the JSON is sent through the network somehow and logged into a target engine.</p>

    <div class='pre p1 fill-light mt0'>onFrameLog</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/undefined">undefined</a></code>:
        
      
    
  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>To learn more about how to use frame logs for communicating a pair of engines, have a look at
the repo at <a href="https://github.com/piulin/piured">https://github.com/piulin/piured</a></p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.onFrameLog = (frameLog) {
    <span class="hljs-comment">//send it to the remote engine somehow</span>
    mm.sendFrameLog(frameLog) ;
}</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='engineonstagecleared'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>onStageCleared</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Sets the callback function <code>onStageCleared</code>. This function is called once the engine is stopped (either by calling <a href="#enginestop">Engine#stop</a> or
by reaching the end of the song). It can be used to report the player's performance.</p>

    <div class='pre p1 fill-light mt0'>onStageCleared</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>value</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>)</code>
	    
          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      <p><p>We report the player's performance when the stage is cleared</p>
</p>
      <pre class='p1 overflow-auto round fill-light'>engine.onStageCleared = <span class="hljs-function">(<span class="hljs-params">performance</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(performance) ;
    <span class="hljs-built_in">window</span>.close() ;
}</pre>
    
  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  

  
</section>

          
        
          
            <div class='keyline-top-not py2'><section class='py2 clearfix'>

  <h2 id='configuration-files' class='mt0'>
    Configuration Files
  </h2>

  
    <p>Here you can find the configuration helper classes to configure the engine.</p>

  
</section></div>
          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='stageconfig'>
      StageConfig
    </h3>
    
    
  </div>
  

  <p>This class holds the configuration of a stage.</p>

    <div class='pre p1 fill-light mt0'>new StageConfig(SSCFile: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, audioFile: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, playBackSpeed: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, offset: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, resourcePath: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, noteskins: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>, onReadyToStart: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>SSCFile</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    path to the Stepmania SSC file describing the levels and steps available

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>audioFile</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    path to the audio file in mp3 or ogg format associated with the SSC file

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>playBackSpeed</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    song playback rate. A 
<code>playBackSpeed</code>
 equal to 1.0 configure the engine to play the song at the normal speed

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>offset</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    synchronization offset. Use it to synchronize off-the-beat charts with the audio

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>resourcePath</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    path to the 
<code>piured-engine</code>
 folder

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>noteskins</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>)</code>
	    list of noteskins available to use for playerStages. Include those only used in them.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>onReadyToStart</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a>
            = <code>()=&gt;{}</code>)</code>
	    callback function. This function will be called once the engine has loaded up completely the stage
and it's ready to begin the playback

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'>let stageConfig = new StageConfig(&#x27;song.ssc&#x27;,
         &#x27;song.mp3&#x27;,
         1.0,
         0.0,
         &#x27;piured-engine,
         [&#x27;NXA&#x27;],
         () =&gt; {
             let dateToStart = new Date() ;
             // delay of 2 secs
             dateToStart.setMilliseconds(dateToStart.getMilliseconds() + 2000.0) ;
             engine.startPlayBack(dateToStart, () =&gt; {return new Date() ;}) ;
         }
) ;</pre>
    
  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='playerconfig'>
      PlayerConfig
    </h3>
    
    
  </div>
  

  <p>This class holds the configuration for a player.</p>

    <div class='pre p1 fill-light mt0'>new PlayerConfig(inputConfig: (<a href="#keyinputconfig">KeyInputConfig</a> | <a href="#touchinputconfig">TouchInputConfig</a> | <a href="#remoteinput">RemoteInput</a>), noteskin: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, level: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, speed: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, accuracyMargin: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, receptorX: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, receptorY: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, scale: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>inputConfig</span> <code class='quiet'>((<a href="#keyinputconfig">KeyInputConfig</a> | <a href="#touchinputconfig">TouchInputConfig</a> | <a href="#remoteinput">RemoteInput</a>))</code>
	    input configuration

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>noteskin</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>)</code>
	    player's noteskin. Note that 
<code>noteskin</code>
 needs to be previously passed in the constructor of 
<a href="#stageconfig">StageConfig</a>
.

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>level</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</code>
	    levelId to be played by the player

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>speed</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>1.0</code>)</code>
	    rate in which the steps traverse the screen from the bottom to the receptor

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>accuracyMargin</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0.15</code>)</code>
	    span of time (in seconds) in which a step is considered to be pressed

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>receptorX</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    X position of player stage with respect to the stage

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>receptorY</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Y position of player stage with respect to the stage

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>scale</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>1.0</code>)</code>
	    scale applied to the player stage

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> p1InputConfig = RemoteInput() ;
<span class="hljs-keyword">let</span> p1Config = <span class="hljs-keyword">new</span> PlayerConfig(p1InputConfig,
                     <span class="hljs-string">&#x27;NXA&#x27;</span>,
                     <span class="hljs-number">0</span>,
                     <span class="hljs-number">3.0</span>,
                     <span class="hljs-number">0.15</span>) ;</pre>
    
  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='keyinputconfig'>
      KeyInputConfig
    </h3>
    
    
  </div>
  

  <p>Class for configuring the keyboard as input method.
For registering key strokes, it is necessary to pass the key events into the engine through methods <a href="#enginekeydown">Engine#keyDown</a>
and <a href="#enginekeyup">Engine#keyUp</a>.</p>

    <div class='pre p1 fill-light mt0'>new KeyInputConfig(lpad: {dl: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ul: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, c: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ur: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, dr: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>}, rpad: {dl: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ul: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, c: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ur: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, dr: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>})</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>lpad</span> <code class='quiet'>({dl: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ul: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, c: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ur: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, dr: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>})</code>
	    left pad keymap

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>rpad</span> <code class='quiet'>({dl: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ul: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, c: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, ur: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>, dr: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>})</code>
	    right pad keymap

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> p1InputConfig = <span class="hljs-keyword">new</span> KeyInputConfig({
   <span class="hljs-attr">dl</span>: <span class="hljs-string">&#x27;Z&#x27;</span>,
   <span class="hljs-attr">ul</span> : <span class="hljs-string">&#x27;Q&#x27;</span>,
   <span class="hljs-attr">c</span> : <span class="hljs-string">&#x27;S&#x27;</span>,
   <span class="hljs-attr">ur</span> : <span class="hljs-string">&#x27;E&#x27;</span>,
   <span class="hljs-attr">dr</span>: <span class="hljs-string">&#x27;C&#x27;</span>
},
{
   <span class="hljs-attr">dl</span>: <span class="hljs-string">&#x27;V&#x27;</span>,
   <span class="hljs-attr">ul</span> : <span class="hljs-string">&#x27;R&#x27;</span>,
   <span class="hljs-attr">c</span> : <span class="hljs-string">&#x27;G&#x27;</span>,
   <span class="hljs-attr">ur</span> : <span class="hljs-string">&#x27;Y&#x27;</span>,
   <span class="hljs-attr">dr</span>: <span class="hljs-string">&#x27;N&#x27;</span>
}) ;</pre>
    
  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='touchinputconfig'>
      TouchInputConfig
    </h3>
    
    
  </div>
  

  <p>Class for configuring the input for a touch-capable device. The input pad will be drawn on the screen.
For registering the touch input, it is necessary to pass the touch events into the engine through methods <a href="#enginetouchdown">Engine#touchDown</a>
and <a href="#enginetouchup">Engine#touchUp</a>.</p>

    <div class='pre p1 fill-light mt0'>new TouchInputConfig(scale: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, X: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>, Y: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>)</div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>scale</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>1.0</code>)</code>
	    scaling factor

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>X</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    X position of the pad with respect to the player's stage

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>Y</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">number</a>
            = <code>0</code>)</code>
	    Y position of the pad with respect to the player's stage

          </div>
          
        </div>
      
    </div>
  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> p1InputConfig = <span class="hljs-keyword">new</span> TouchInputConfig() ;</pre>
    
  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='remoteinput'>
      RemoteInput
    </h3>
    
    
  </div>
  

  <p>This class configures a remote input for a remote player. Make sure you frame the logs corresponding to players
using remote input through <a href="#enginelogframe">Engine#logFrame</a></p>

    <div class='pre p1 fill-light mt0'>new RemoteInput()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-keyword">let</span> remoteInputConfig = <span class="hljs-keyword">new</span> remoteInput() ;</pre>
    
  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
